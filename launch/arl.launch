<launch>

    <!-- dataset name -->
    <arg name="dataset" value="multicam_vicon_4" />


    <!-- MASTER NODE! -->
    <node name="estimate_vicon2gt" pkg="vicon2gt" type="estimate_vicon2gt" output="screen" clear_params="true" required="true">
    <!--<node name="estimate_vicon2gt" pkg="vicon2gt" type="estimate_vicon2gt" output="screen" clear_params="true" required="true" launch-prefix="xterm -e gdb -ex run &#45;&#45;args">-->

        <!-- bag topics -->
        <param name="topic_imu"      type="string" value="/mti/sensor/imu_raw" />
        <param name="topic_cam"      type="string" value="/stereo01/cam0" />
        <param name="topic_vicon"    type="string" value="/mocap/laptop_rig/odom" />
<!--        <param name="topic_vicon"    type="string" value="/mocap/laptop_rig/pose" />-->

        <!-- bag parameters -->
        <param name="path_bag"    type="string" value="/home/patrick/datasets/ARL/$(arg dataset).bag" />
        <param name="bag_start"   type="double" value="0" />
        <param name="bag_durr"    type="double" value="-1" />

        <!-- save information -->
        <param name="save2file"          type="bool"   value="true" />
        <param name="stats_path_states"  type="string" value="/home/patrick/datasets/ARL/$(arg dataset)_vicon2gt_states.csv" />
        <param name="stats_path_info"    type="string" value="/home/patrick/datasets/ARL/$(arg dataset)_vicon2gt_info.txt" />


        <!-- world parameters -->
        <rosparam param="grav_inV">[0.0,0.0,9.81]</rosparam>
        <rosparam param="R_BtoI">
            [
            0.746551,    0.65236,   0.130719,
            -0.659179,   0.751885,  0.0123194,
            -0.0902492, -0.0953644,   0.991343
            ]
        </rosparam>
        <rosparam param="p_BinI">
            [
            -0.158024,
            -0.0249068,
            0.0749971
            ]
        </rosparam>
        <param name="toff_imu_to_vicon"          type="double" value="0.00" />
        <param name="enforce_grav_mag"           type="bool"   value="true" />
        <param name="num_loop_relin"             type="int"    value="5" />
        <param name="estimate_toff_vicon_to_imu" type="bool"   value="true" />


        <!-- vicon sigmas, only used if we don't get odometry -->
        <!-- sigmas: (rx,ry,rz,px,py,pz) -->
        <rosparam param="vicon_sigmas">[1e-4,1e-4,1e-4,1e-5,1e-5,1e-5]</rosparam>


        <!-- mit-xsens from kalibr google-groups thread -->
        <!-- https://groups.google.com/d/msg/kalibr-users/m17VpekSHtg/9_wccwdTiUAJ -->
        <param name="gyroscope_noise_density"      type="double"   value="0.0013248" />
        <param name="gyroscope_random_walk"        type="double"   value="6.2176e-05" />
        <param name="accelerometer_noise_density"  type="double"   value="0.006056" />
        <param name="accelerometer_random_walk"    type="double"   value="0.0011056" />


    </node>


</launch>