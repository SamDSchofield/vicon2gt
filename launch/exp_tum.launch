<launch>
    <arg name="dataset" default="tum_room1" />
    <arg name="folder"  default="/bags" />
    <arg name="gt_topic" default="not actually used, just making it consistent with eth" />


    <!-- MASTER NODE! -->
    <node name="estimate_vicon2gt" pkg="vicon2gt" type="estimate_vicon2gt" output="screen" clear_params="true" required="true">

        <!-- bag topics -->
        <param name="topic_imu"      type="string" value="/imu0" />
        <param name="topic_cam"      type="string" value="/cam0/image_raw" />
        <param name="topic_vicon"    type="string" value="/vrpn_client/raw_transform" />

        <!-- bag parameters -->
        <param name="path_bag"    type="string" value="$(arg folder)/$(arg dataset).bag" />
        <param name="bag_start"   type="int"    value="0" />
        <param name="bag_durr"    type="int"    value="-1" />

        <!-- save information -->
        <param name="save2file"          type="bool"   value="true" />
        <param name="stats_path_states"  type="string" value="$(arg folder)/vicon2gt/$(arg dataset)_vicon2gt_states.csv" />
        <param name="stats_path_info"    type="string" value="$(arg folder)/vicon2gt/$(arg dataset)_vicon2gt_info.txt" />


        <!-- world parameters -->
        <rosparam param="R_BtoI">[1, 0, 0, 0, 1, 0, 0, 0, 1]</rosparam>
        <rosparam param="p_BinI">[0, 0, 0]</rosparam>
        <rosparam param="R_GtoV">[1, 0, 0, 0, 1, 0, 0, 0, 1]</rosparam>
        <param name="gravity_magnitude"          type="double" value="9.81" />
        <param name="toff_imu_to_vicon"          type="double" value="0.0" />
        <param name="num_loop_relin"             type="int"    value="0" />
        <param name="estimate_toff_vicon_to_imu" type="bool"   value="true" />
        <param name="estimate_ori_vicon_to_imu"  type="bool"   value="true" />
        <param name="estimate_pos_vicon_to_imu"  type="bool"   value="true" />


        <!-- vicon sigmas, only used if we don't get odometry -->
        <!-- sigmas: (rx,ry,rz,px,py,pz) -->
        <rosparam param="vicon_sigmas">[1e-3,1e-3,1e-3,1e-2,1e-2,1e-2]</rosparam>
        <param name="freq_pub_raw_vicon" type="double" value="10.0" />
        <param name="use_manual_sigmas"  type="bool"   value="true" />

        <!-- vi-sensor -->
        <param name="gyroscope_noise_density"      type="double"   value="1.6968e-04" />
        <param name="gyroscope_random_walk"        type="double"   value="1.9393e-05" />
        <param name="accelerometer_noise_density"  type="double"   value="2.0000e-3" />
        <param name="accelerometer_random_walk"    type="double"   value="3.0000e-3" />
    </node>
</launch>
